# 变更弹性云服务器规格<a name="ecs_04_0003"></a>

## 场景描述<a name="section203962505268"></a>

当创建的弹性云服务器规格无法满足业务需要时，可参考本章节变更规格，升级vCPU、内存。对于部分类型的弹性云服务器，您还可以在变更规格时，更换弹性云服务器的类型。

## 约束限制<a name="section23721755182615"></a>

-   关机状态的弹性云服务器才能执行变更云服务器规格操作。
-   变更规格时，弹性云服务器的磁盘容量不能变小。
-   变更弹性云服务器规格时，用户不能选择已售罄的CPU和内存资源。
-   弹性云服务器规格（CPU或内存）变小，会影响弹性云服务器的性能。
-   对于部分类型的弹性云服务器，暂不支持规格变更操作。您可以通过调用[查询云服务器规格变更支持列表](查询云服务器规格变更支持列表.md)接口，通过指定弹性云服务器规格，查询该规格可以变更的规格列表。[规格清单](https://support.huaweicloud.com/productdesc-ecs/zh-cn_topic_0159822360.html)章节列举了当前公有云提供的云服务器类型，并对每种云服务器类型的功能、使用进行介绍，具体请以各类型云服务器的“使用须知”为准。

## 涉及接口<a name="section1737160142715"></a>

变更弹性云服务器规格涉及的接口如下：

-   [变更云服务器规格](#li20744151453314)
-   [确认云服务器规格变更](#li188259221331)
-   [回退云服务器规格变更](#li13919143183311)

## 操作步骤<a name="section6985191649"></a>

1.  <a name="li20744151453314"></a>变更云服务器规格。
    -   接口相关信息

        URI格式：POST /v2.1/\{tenant\_id\}/servers/\{server\_id\}/action

        详情请参见“[变更云服务器规格](变更云服务器规格-7.md)”。

    -   请求示例

        ```
        {
            "resize": {
                          "flavorRef": "s6.medium.2"
            }
        }
        ```

    -   响应示例

        不涉及

2.  <a name="li188259221331"></a>确认云服务器规格变更。

    前提条件：弹性云服务器状态（即云服务器的“OS-EXT-STS:vm\_state“属性）必须是“resized“。

    -   接口相关信息

        URI格式：POST /v2.1/\{tenant\_id\}/servers/\{server\_id\}/action

        详情请参见“[确认变更云服务器规格](确认变更云服务器规格.md)”。

    -   请求示例

        ```
        {
           "confirmResize": null
        }
        ```

    -   响应示例

        不涉及

3.  <a name="li13919143183311"></a>（可选）回退云服务器规格变更。

    **回退须知**：

    弹性云服务器状态（即云服务器的“OS-EXT-STS:vm\_state“属性）必须是“resized“。

    回退后，在变更规格过程中的数据修改将会丢失。

    -   接口相关信息

        URI格式：POST /v2.1/\{tenant\_id\}/servers/\{server\_id\}/action

        详情请参见“[回退变更云服务器规格](回退变更云服务器规格.md)”。

    -   请求示例

        ```
        {
            "revertResize": null
        }
        ```

    -   响应示例

        不涉及

